{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Typeahead.vue?b982","webpack:///./src/App.vue?4197","webpack:///./src/bus.js","webpack:///./src/lib/fetch.js","webpack:///./src/lib/createRedditDataClient.js","webpack:///./src/lib/redditDataClient.js","webpack:///./src/lib/buildGraph.js","webpack:///./src/appState.js","webpack:///./src/Progress.js","webpack:///./src/lib/measureText.js","webpack:///./src/lib/layout/Vector.js","webpack:///./src/lib/layout/flock.js","webpack:///./src/lib/layout/boidLayout.js","webpack:///./src/lib/createInterpolateLayout.js","webpack:///./src/lib/layout/getDelaunayGraph.js","webpack:///./src/lib/layout/makeSpanningTree.js","webpack:///./src/lib/layout/removeOverlaps.js","webpack:///./src/lib/layout/Rect.js","webpack:///./src/lib/aggregateLayout.js","webpack:///./src/lib/renderer/linkAnimator.js","webpack:///./src/lib/createRenderer.js","webpack:///./src/components/About.vue?6558","webpack:///src/components/About.vue","webpack:///./src/components/About.vue?f71c","webpack:///./src/components/About.vue","webpack:///./src/components/Typeahead.vue?6802","webpack:///src/components/Typeahead.vue","webpack:///./src/components/Typeahead.vue?c2c7","webpack:///./src/components/Typeahead.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?0fe9","webpack:///./src/components/About.vue?2d3b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","$event","preventDefault","onSubmit","appState","query","getSuggestions","doSearch","isLoading","_e","_v","aboutVisible","_s","progress","message","hasGraph","ref","tooltip","text","subreddit","staticRenderFns","bus","require","request","url","options","req","cancelable","Promise","download","cancel","abort","resolve","reject","updateProgress","e","lengthComputable","loaded","total","percent","transferComplete","status","response","responseType","JSON","parse","transferFailed","transferCanceled","cancelled","XMLHttpRequest","addEventListener","open","method","headers","keys","forEach","setRequestHeader","send","body","fuzzysort","createDataClient","endpoint","fileNames","getFileNames","downloaded","Map","indexed","list","prepared","sizeCount","sizes","fetch","then","rows","row","index","set","getRelated","getSuggestion","getSize","subName","size","firstLetter","toLocaleLowerCase","results","go","limit","map","x","html","highlight","target","downloadAndIndexFile","sims","getFileForQuery","console","log","keyName","prepare","fileNamesIndex","fileName","replace","letter","isProd","dataEndpoint","redditDataClient","createRedditDataClient","buildGraph","entryWord","MAX_DEPTH","trim","pendingResponse","graph","maxDepth","queue","requestDelay","startDownload","startQueryConstruction","dispose","fetchNext","loadSiblings","parent","parentNode","getNode","addNode","depth","other","idx","hasOtherNode","hasNode","hasOtherLink","getLink","addLink","setTimeout","loadNext","nextWord","updateLayout","fire","res","onPendingReady","catch","msg","err","error","downloadError","lastBuilder","Progress","phase","errors","remaining","currentWord","layout","iteration","working","layoutCompletion","queryState","qs","useSearch","appStateFromQuery","performSearch","updateAppState","newState","queryString","reset","rootId","freeze","onChange","svgns","xmlns","createTextMeasure","svgContainer","useFastTextMeasure","cachedSizes","cachedWords","abc","avgLetterWidthByFontSize","safariGuess","1","0.875","0.833","0.75","0.5","measure","fontSize","Math","round","cacheKey","cachedResult","textContainer","document","createElementNS","setAttributeNS","appendChild","words","split","toWordWidths","spaceWidth","measureSpaceWidth","totalWidth","sumUpWordsLengthInPixels","removeChild","width","word","spaceWidthKey","textContent","measureTextWidth","measureText","measureAvgWidth","preciseMeasure","cachedWordsKey","undefined","avgWidthAtFontSize","Error","abcWidth","svgTextElement","getBBox","Vector","y","sqrt","scalar","maxMag","mag","dx","dy","a","b","random","Flock","boids","neighbors","boid","nodeId","forEachLinkedNode","otherBoid","id","run","boidId","pos","setDesiredPosition","Boid","acceleration","angle","nextDouble","PI","velocity","cos","sin","position","desiredPosition","maxspeed","maxforce","flock","borders","update","force","nCount","div","add","sep","separate","ali","align","coh","cohesion","mass","applyForce","pull","sub","mult","desired","normalize","steer","desiredseparation","count","distanceTo","diff","neighbordist","sum","dist","seek","createRandom","createFakeLayout","nodes","getNodePosition","setDesiredNodePosition","step","addBoid","setDesiredBoidPosition","createInterpolateLayout","from","to","duration","elapsed","done","ease","fromPos","toPos","getDelaunayGraph","vertices","delaunay","Delaunator","triangles","triangulationGraph","createGraph","v","first","second","third","addTriangulationLink","fromId","toId","tGraph","makeSpanningTree","mstEdges","getGraph","getRootId","gentNode","randomAPI","EdgeModel","removeOverlaps","rectangles","canMove","yes","pullX","pullY","pair","cx","cy","totalMovement","forEachLink","addTriangulationLinkWeight","spanningTree","mst","findMinimumSpanningTree","edge","getRect","randomIterator","shuffle","grow","arrayOfRects","Array","removeOverlapsForRectangles","spanningGraph","processed","Set","growAt","has","rootPos","otherNode","childPos","overlaps","getOverlapFactor","Number","isFinite","abs","wx","wy","height","min","link","weight","getTriangulationWeight","centerDistance","getPointDistance","getRectangularDistance","left","right","top","bottom","Rect","params","assign","isNumber","factor","eventify","createLayout","USE_FAKE","USE_INTERPOLATE","REMOVE_OVERLAPS","USE_REAL","createAggregateLayout","physicsLayout","createPhysicsLayout","fakeLayout","interpolateLayout","isGraphReady","layoutIterations","layoutTime","maxLayoutIterations","maxLayoutTime","api","pinNode","setGraphReady","getGraphReady","rect","start","performance","now","finished","max","syncLayouts","setLayoutCompletion","runOverlapsRemoval","forEachNode","node","getRectangles","move","delta","newMove","setNodePosition","rects","inflatedRect","springLength","springCoeff","gravity","theta","dragCoeff","timeStep","nodeMass","links","getLinks","mul","svg","createLinkAnimator","edgeContainer","scheduled","beingAnimated","maxAnimations","scheduleLink","sort","getLinkScore","processor","requestAnimationFrame","processNext","linkAnimator","getLinkInfo","cancelAnimationFrame","pop","speed","gaussian","animateLink","el","isDone","delete","linkId","fromNode","toNode","maxT","frame","dRatio","strokeWidth","color","linkInfo","pathData","ui","attr","fill","stroke","createRenderer","clickTimeout","scene","querySelector","nodeContainer","lastPanTime","lastTouchEndTime","panzoom","createPanZoom","defaultRectangle","showRectangle","currentLayoutFrame","textMeasure","onGraphReady","render","clearLastScene","off","onMouseClick","clickTarget","contains","getNodeIdFromUI","highlightNode","removeClass","mainNode","makeHovered","classList","moveToFront","linkUI","onBeforeLinkAdded","toUI","fromUI","onDoubleClickMouse","stopPropagation","onDoubleClick","className","elements","querySelectorAll","remove","newGraph","drawLinks","onGraphStructureChanged","readyGraph","startLayout","updatePositions","changes","change","changeType","onTouchEnd","onPan","clear","removeEventListener","Date","dTouchEnd","dPan","clearTimeout","lastChild","uiAttributes","getNodeUIAttributes","rectAttributes","rx","ry","textAttributes","px","py","class","transform","close","staticStyle","_m","mounted","closeHandler","keyCode","beforeDestroy","methods","$emit","component","directives","rawName","expression","readonly","placeholder","domProps","composing","currentQuery","getSuggestionsInternal","cycleTheList","pickCurrentText","_l","suggestion","selected","pickSuggestion","loadingError","props","default","delay","currentSelected","showSuggestions","showLoading","suggestions","watch","newQuery","refresh","hideSuggestions","pendingKeyToShow","showIfNeeded","visible","focus","$refs","input","self","previous","isArray","items","which","components","About","Typeahead","Subreddit","computed","renderer","blur","showSubreddit","Vue","config","productionTip","h","App","$mount"],"mappings":"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","file":"js/app.220a88ef.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=style&index=0&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('form',{staticClass:\"search-box\",on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('typeahead',{attrs:{\"placeholder\":\"Enter subreddit name\",\"ref:typeahead\":\"\",\"query\":_vm.appState.query,\"get-suggestions\":_vm.getSuggestions},on:{\"selected\":_vm.doSearch}})],1),(!_vm.isLoading)?_c('div',{staticClass:\"help\"},[_vm._v(\" The graph of related subreddits \"),_c('a',{staticClass:\"highlight\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.aboutVisible = true}}},[_vm._v(\"Learn more.\")])]):_vm._e(),(_vm.isLoading)?_c('div',{staticClass:\"help\"},[_vm._v(_vm._s(_vm.appState.progress.message))]):_vm._e(),_c('div',{staticClass:\"about-line\"},[_c('a',{staticClass:\"about-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.aboutVisible = true}}},[_vm._v(\"about\")]),_c('a',{staticClass:\"bold\",attrs:{\"href\":\"https://github.com/anvaka/sayit\"}},[_vm._v(\"source code\")])]),(_vm.aboutVisible)?_c('about',{on:{\"close\":function($event){_vm.aboutVisible = false}}}):_vm._e(),(!_vm.appState.hasGraph)?_c('div',{staticClass:\"welcome\"},[_c('h3',[_vm._v(\"Welcome!\")]),_c('p',[_vm._v(\" This website renders graph of related subreddits. \"),_c('a',{staticClass:\"highlight\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.aboutVisible = true}}},[_vm._v(\"Click here\")]),_vm._v(\" to learn more, or \"),_c('a',{staticClass:\"highlight\",attrs:{\"href\":\"?query=math\"}},[_vm._v(\"try demo\")]),_vm._v(\". \")])]):_vm._e(),_c('div',{ref:\"tooltip\",staticClass:\"tooltip\"},[_vm._v(_vm._s(_vm.tooltip.text))]),(_vm.subreddit)?_c('subreddit',{staticClass:\"preview\",attrs:{\"name\":_vm.subreddit}}):_vm._e(),(_vm.subreddit)?_c('div',{staticClass:\"close-container\"},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.subreddit = null}}},[_vm._v(\"close\")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const bus = require('ngraph.events')({});\n\nexport default bus;\n","export default function request(url, options) {\n  if (!options) options = {};\n  let req;\n  let cancelable = new Promise(download);\n  cancelable.cancel = cancel;\n\n  return cancelable;\n\n  function cancel() {\n    if (req) {\n      req.abort();\n    }\n  }\n\n  function download(resolve, reject) {\n    req = new XMLHttpRequest();\n\n    if (typeof options.progress === 'function') {\n      req.addEventListener('progress', updateProgress, false);\n      // req.upload.addEventListener('progress', updateProgress, false);\n    }\n\n    req.addEventListener('load', transferComplete, false);\n    req.addEventListener('error', transferFailed, false);\n    req.addEventListener('abort', transferCanceled, false);\n\n    req.open(options.method || 'GET', url);\n    if (options.responseType) {\n      req.responseType = options.responseType;\n    }\n    if (options.headers) {\n      Object.keys(options.headers).forEach(key => {\n        req.setRequestHeader(key, options.headers[key]);\n      });\n    }\n\n    if (options.method === 'POST') {\n      req.send(options.body);\n    } else {\n      req.send(null);\n    }\n\n    function updateProgress(e) {\n      if (e.lengthComputable) {\n        options.progress({\n          loaded: e.loaded,\n          total: e.total,\n          percent: e.loaded / e.total,\n          lengthComputable: true\n        });\n      } else {\n        options.progress({\n          loaded: e.loaded,\n          lengthComputable: false\n        });\n      }\n    }\n\n    function transferComplete() {\n      if (req.status !== 200) {\n        reject(`Unexpected status code ${req.status} when calling ${url}`);\n        return;\n      }\n      var response = req.response;\n\n      if (options.responseType === 'json' && typeof response === 'string') {\n        // IE\n        response = JSON.parse(response);\n      }\n\n      resolve(response);\n    }\n\n    function transferFailed() {\n      reject(`Failed to download ${url}`);\n    }\n\n    function transferCanceled() {\n      reject({\n        cancelled: true,\n        message: `Cancelled download of ${url}`\n      });\n    }\n  }\n}","import fetch from './fetch';\nconst fuzzysort = require('fuzzysort')\n\n\nexport default function createDataClient(endpoint) {\n  const fileNames = getFileNames();\n  const downloaded = new Map();\n  const indexed = new Map();\n  const list = [];\n  let prepared = [];\n\n  let sizeCount = 1;\n  let sizes = new Map();\n  fetch(endpoint + 'count.json', {responseType: 'json'})\n    .then(rows => {\n      rows.forEach((row, index) => {\n        row.forEach(subreddit => {\n          sizes.set(subreddit, index + 2);\n        })\n      });\n\n      sizeCount = rows.length + 2;\n    })\n\n  return {\n    getRelated,\n    getSuggestion,\n    getSize\n  }\n\n  function getSize(subName) {\n    let size = sizes.get(subName);\n    return (size || 1)/sizeCount;\n  }\n\n  function getSuggestion(query) {\n    let firstLetter = query[0].toLocaleLowerCase();\n    let results = downloaded.get(firstLetter);\n    if (results) {\n      results = fuzzysort.go(query, prepared, {limit: 10})\n      return Promise.resolve(results.map(x => ({\n        html: fuzzysort.highlight(x, '<b>', '</b>'),\n        text: x.target\n      })));\n    } else {\n      return downloadAndIndexFile(firstLetter).then(() => {\n        return getSuggestion(query);\n      })\n    }\n  }\n\n  function getRelated(query) {\n    let sims = indexed.get(query.toLocaleLowerCase());\n    if (sims) return Promise.resolve(sims);\n\n    return getFileForQuery(query);\n  }\n\n  function downloadAndIndexFile(firstLetter) {\n    let url = endpoint + fileNames.get(firstLetter);\n    console.log('download ', firstLetter);\n    return fetch(url, {responseType: 'json'})\n      .then(response => {\n        downloaded.set(firstLetter, response);\n        response.forEach(row => {\n          let keyName = row[0].toLocaleLowerCase();\n          if (indexed.get(keyName)) return;\n\n          list.push(row[0]);\n          indexed.set(keyName, row);\n        });\n        prepared = list.map(l => fuzzysort.prepare(l));\n      })\n  }\n\n  function getFileForQuery(query) {\n    let firstLetter = query[0].toLocaleLowerCase();\n    let results = downloaded.get(firstLetter);\n    if (results) return Promise.resolve([]);\n\n    return downloadAndIndexFile(firstLetter).then(() => {\n        let sims = indexed.get(query.toLocaleLowerCase())\n        return sims || [];\n      })\n  }\n\n}\n\nfunction getFileNames() {\n  let fileNamesIndex = new Map();\n[\n  '0_z0123456789jqx.json', '10_m.json', '11_l.json', '12_i.json', '13_h.json', '14_g.json', '15_f.json', '16_e.json', '17_d.json', '18_c.json', '19_b.json', '1_yk.json', '20_a.json', '2_w.json', '3_vo.json', '4_u.json', '5_t.json', '6_s.json', '7_r.json', '8_p.json', '9_n.json'\n].forEach(name => {\n    const fileName = name.replace(/^\\d\\d?_/, '').replace(/\\.json$/, '');\n    for (var i = 0; i < fileName.length; ++i) {\n      let letter = fileName[i];\n      fileNamesIndex.set(letter, name);\n    }\n  });\n  return fileNamesIndex;\n}","import createRedditDataClient from \"./createRedditDataClient\";\n\nconst isProd = true;\nconst dataEndpoint = isProd\n  ? \"https://anvaka.github.io/sayit-data/3/\"\n  : \"http://localhost:8081/\";\nconst redditDataClient = createRedditDataClient(dataEndpoint);\n\nexport default redditDataClient;\n","import bus from '../bus';\nimport redditDataClient from './redditDataClient';\n\nexport default function buildGraph(entryWord, MAX_DEPTH, progress) {\n  entryWord = entryWord && entryWord.trim();\n  if (!entryWord) return;\n\n  entryWord = entryWord.toLocaleLowerCase();\n\n  let cancelled = false;\n  let pendingResponse;\n  let graph = require('ngraph.graph')();\n  graph.maxDepth = MAX_DEPTH;\n  let queue = [];\n  let requestDelay = 0;\n  progress.startDownload();\n\n  startQueryConstruction();\n\n  return {\n    dispose,\n    graph\n  }\n\n  function dispose() {\n    cancelled = true;\n    if (pendingResponse) {\n      // pendingResponse.cancel();\n      pendingResponse = null;\n    }\n  }\n\n  function startQueryConstruction() {\n    fetchNext(entryWord);\n  }\n\n  function loadSiblings(results) {\n    const parent = results[0];\n    var parentNode = graph.getNode(parent);\n\n    if (!parentNode) {\n      parentNode = graph.addNode(parent, {\n        depth: 0,\n        size: redditDataClient.getSize(parent)\n      });\n    }\n\n    results.forEach((other, idx) => {\n      if (idx === 0) return;\n\n      const hasOtherNode = graph.hasNode(other);\n      if (hasOtherNode) {\n        const hasOtherLink = graph.getLink(other, parent) || graph.getLink(parent, other);\n        if (!hasOtherLink) {\n          graph.addLink(parent, other);\n        }\n        return;\n      }\n\n      let depth = parentNode.data.depth + 1;\n      graph.addNode(other, {depth, size: redditDataClient.getSize(other)});\n      graph.addLink(parent, other);\n      if (depth < MAX_DEPTH) queue.push(other);\n    });\n\n    setTimeout(loadNext, requestDelay);\n  }\n\n  function loadNext() {\n    if (cancelled) return;\n    if (queue.length === 0) {\n      bus.fire('graph-ready', graph);\n      return;\n    }\n\n    let nextWord = queue.shift();\n    fetchNext(nextWord);\n    progress.updateLayout(queue.length, nextWord);\n  }\n\n  function fetchNext(query) {\n    pendingResponse = redditDataClient.getRelated(query);\n    pendingResponse.then(res => onPendingReady(res, query)).catch((msg) => {\n      const err = 'Failed to download ' + query + '; Message: ' + msg;\n      console.error(err);\n      progress.downloadError(err)\n      loadNext();\n    });\n  }\n\n  function onPendingReady(res, query) {\n    if (!res || !res.length) res = [query];\n    loadSiblings(res);\n  }\n}","import buildGraph from './lib/buildGraph';\nimport Progress from './Progress';\n\nconst queryState = require('query-state');\n\nconst qs = queryState(\n  {\n    query: ''\n  },\n  {\n    useSearch: true\n  }\n);\n\nlet lastBuilder;\nconst appStateFromQuery = qs.get();\nconst appState = {\n  hasGraph: false,\n  maxDepth: appStateFromQuery.maxDepth || 2,\n  progress: new Progress(),\n  graph: null,\n  query: appStateFromQuery.query\n};\n\nif (appState.query) {\n  performSearch(appState.query);\n}\n\nexport default appState;\n\nqs.onChange(updateAppState);\n\nfunction updateAppState(newState) {\n  appState.query = newState.query;\n}\n\nexport function performSearch(queryString) {\n  appState.hasGraph = true;\n  appState.progress.reset();\n\n  qs.set('query', queryString);\n  if (lastBuilder) {\n    lastBuilder.dispose();\n  }\n\n  lastBuilder = buildGraph(queryString, appState.maxDepth, appState.progress);\n  lastBuilder.graph.rootId = queryString;\n  appState.graph = Object.freeze(lastBuilder.graph);\n  return lastBuilder.graph;\n}\n","export default class Progress {\n  constructor() {\n    this.message = '';\n    this.phase = 'none';\n    this.download = {\n      errors: [],\n      remaining: 0,\n      currentWord: '',\n    };\n    this.layout = {\n      iteration: 0\n    };\n    this.working = true\n  }\n\n  startDownload() {\n    this.phase = 'download';\n  }\n\n  startLayout() {\n    this.message = 'Finished download. Constructing layout...';\n    this.phase = 'layout';\n  }\n\n  setLayoutCompletion(layoutCompletion) {\n    if (this.phase === 'layout') {\n      this.message = `Finished download. Constructing layout ${layoutCompletion}%...`;\n    }\n  }\n\n  updateLayout(remaining, nextWord) {\n    this.download.currentWord = nextWord;\n    this.download.remaining = remaining;\n    this.message = `Remaining: ${remaining}. Downloading ${nextWord}`;\n  }\n\n  done() {\n    this.working = false;\n  }\n\n  downloadError(message) {\n    this.download.errors.push(message);\n  }\n\n  reset() {\n    this.phase = 'none',\n    this.download.errors = [];\n    this.download.remaining = 0;\n    this.download.currentWord = '';\n    this.layout.iteration = 0;\n    this.message = '';\n    this.working = true;\n  }\n}","var svgns = 'http://www.w3.org/2000/svg';\nvar xmlns = 'http://www.w3.org/XML/1998/namespace';\n\n\nexport default function createTextMeasure(svgContainer, options) {\n  options = options || {};\n  if (!('useFastTextMeasure' in options)) {\n    options.useFastTextMeasure = false;\n  }\n\n  var cachedSizes = {};\n  var cachedWords = Object.create(null);\n\n  // TODO: If you need custom language, you might wanna extend this.\n  var abc = 'abcdefghijklmnopqrstuvwxyz';\n  var avgLetterWidthByFontSize = {};\n\n  // Safari doesn't work correctly on font-size smaller than 1 px;\n  var safariGuess = {\n    1: 0.4951923076923077,\n    0.875: 0.43509615384615385,\n    0.833: 0.41346153846153844,\n    0.75: 0.3701923076923077,\n    0.5: 0.24459134615384615,\n  };\n\n  return measure;\n\n  function measure(text, fontSize) {\n    if (fontSize < 1) {\n      // take only first three digits:\n      fontSize = (Math.round(fontSize * 1000)) / 1000;\n    }\n\n    var cacheKey = text + fontSize;\n    var cachedResult = cachedSizes[cacheKey];\n    if (cachedResult) return cachedResult;\n    var result = {};\n\n    cachedSizes[cacheKey] = result;\n\n    var textContainer = window.document.createElementNS(svgns, 'text');\n    // set the font size that is requested.\n    textContainer.setAttributeNS(null, 'font-size', fontSize);\n    // we need this to measure words separators.\n    textContainer.setAttributeNS(xmlns, 'xml:space', 'preserve');\n\n    svgContainer.appendChild(textContainer);\n\n    result.words = text.split(/\\s/).map(toWordWidths);\n    result.spaceWidth = measureSpaceWidth();\n    result.totalWidth = sumUpWordsLengthInPixels(result.words, result.spaceWidth);\n\n    svgContainer.removeChild(textContainer);\n\n    return result;\n\n    function sumUpWordsLengthInPixels(words, spaceWidth) {\n      var width = 0;\n\n      words.forEach(function(word) { width += word.width; });\n      width += (words.length - 1) * spaceWidth;\n\n      return width;\n    }\n\n    function measureSpaceWidth() {\n      var spaceWidthKey = 'space' + fontSize;\n      var spaceWidth = avgLetterWidthByFontSize[spaceWidthKey];\n      if (!spaceWidth) {\n        textContainer.textContent = ' ';\n        spaceWidth = measureTextWidth(textContainer);\n        avgLetterWidthByFontSize[spaceWidthKey] = spaceWidth;\n      }\n\n      return spaceWidth;\n    }\n\n    function toWordWidths(text) {\n      return {\n        text: text,\n        width: measureText(text)\n      };\n    }\n\n    function measureText(text) {\n      return options.useFastTextMeasure ? measureAvgWidth(text) : preciseMeasure(text);\n    }\n\n    function preciseMeasure(text) {\n      var cachedWordsKey = text + fontSize;\n      var size = cachedWords[cachedWordsKey];\n      if (size === undefined) {\n        textContainer.textContent = text;\n        size = measureTextWidth(textContainer);\n        if (size === 0 && text.length > 0) {\n          // safari :(.\n          var avgWidthAtFontSize = safariGuess[fontSize];\n          if (avgWidthAtFontSize === undefined) throw new Error('Font size is not overriden for safari ' + fontSize);\n          size = avgWidthAtFontSize * text.length;\n        }\n        cachedWords[cachedWordsKey] = size;\n      }\n\n      return size;\n    }\n\n    function measureAvgWidth(text) {\n      var avgWidthAtFontSize = avgLetterWidthByFontSize[fontSize];\n      if (!avgWidthAtFontSize) {\n        textContainer.textContent = abc;\n        var abcWidth = measureTextWidth(textContainer);\n        avgWidthAtFontSize = abcWidth/abc.length;\n\n        if (avgWidthAtFontSize === 0) {\n          // safari at small fonts :(. Not super proud of this, but not sure how\n          // to fix this better.\n          avgWidthAtFontSize = safariGuess[fontSize]\n        }\n\n        avgLetterWidthByFontSize[fontSize] = avgWidthAtFontSize;\n      }\n\n      return avgWidthAtFontSize * text.length;\n    }\n  }\n}\n\nfunction measureTextWidth(svgTextElement) {\n  var result = svgTextElement.getBBox();\n  return result.width;\n}","export class Vector {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  static sub(a, b) {\n    return new Vector(a.x - b.x, a.y - b.y);\n  }\n  static dist(a, b) {\n    let dx = a.x - b.x;\n    let dy = a.y - b.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n  normalize() {\n    let l = Math.sqrt(this.x * this.x + this.y * this.y);\n    if (l === 0)\n      l = 0.0001;\n    this.x /= l;\n    this.y /= l;\n  }\n  mag() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n  add(other) {\n    this.x += other.x;\n    this.y += other.y;\n  }\n  sub(other) {\n    this.x -= other.x;\n    this.y -= other.y;\n  }\n  div(scalar) {\n    this.x /= scalar;\n    this.y /= scalar;\n  }\n  mult(scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n  }\n  limit(maxMag) {\n    let mag = this.mag();\n    if (mag > maxMag) {\n      this.x *= maxMag / mag;\n      this.y *= maxMag / mag;\n    }\n  }\n  distanceTo(other) {\n    let dx = this.x - other.x;\n    let dy = this.y - other.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n}","import { Vector } from './Vector';\n\n// https://processing.org/examples/flocking.html\n\nvar random = require('ngraph.random')(45);\n\nexport class Flock {\n  constructor(graph) {\n    this.graph = graph;\n    this.boids = new Map();\n    this.neighbors = [];\n  }\n\n  run() {\n    // this.neighbors.forEach(b => b.run(this.neighbors));\n    let boids = this.boids;\n    boids.forEach((boid, nodeId) => {\n      let neighbors = [];\n      this.graph.forEachLinkedNode(nodeId, function(other) {\n        let otherBoid = boids.get(other.id);\n        if (otherBoid) neighbors.push(otherBoid);\n      })\n      boid.run(neighbors);\n    });\n  }\n\n  addBoid(nodeId, b) {\n    this.boids.set(nodeId, b);\n    this.neighbors.push(b);\n  }\n\n  setDesiredBoidPosition(boidId, pos) {\n    const boid = this.boids.get(boidId);\n    if (!boid) return;\n    boid.setDesiredPosition(pos.x, pos.y);\n  }\n}\n\nexport class Boid {\n  constructor(x, y) {\n    this.acceleration = new Vector(0, 0);\n\n    let angle = random.nextDouble() * 2 * Math.PI;\n    this.velocity = new Vector(Math.cos(angle), Math.sin(angle));\n    this.position = new Vector(x, y);\n    this.desiredPosition = new Vector(0, 0);\n    this.r = 400.0;\n    this.maxspeed = 3;\n    this.maxforce = 0.08;\n  }\n\n  run(boids) {\n    this.flock(boids);\n    this.borders();\n    this.update();\n  }\n\n  applyForce(force, nCount) {\n    // We could add mass here if we want A = F / M\n    force.div(nCount)\n    this.acceleration.add(force);\n  }\n\n  setDesiredPosition(x, y) {\n    this.desiredPosition.x = x;\n    this.desiredPosition.y = y;\n  }\n\n  // We accumulate a new acceleration each time based on three rules\n  flock(boids) {\n    let sep = this.separate(boids);   // Separation\n    let ali = this.align(boids);      // Alignment\n    let coh = this.cohesion(boids);   // Cohesion\n    // Arbitrarily weight these forces\n    // sep.mult(1.5);\n    // ali.mult(1.0);\n    // coh.mult(1.0);\n    // Add the force vectors to acceleration\n    const mass = boids.length || 1;\n    this.applyForce(sep, mass);\n    this.applyForce(ali, mass);\n    this.applyForce(coh, mass);\n\n    const pull = Vector.sub(this.desiredPosition, this.position);\n    // pull.div(boids.length);\n    //pull.normalize();\n    pull.limit(0.091);\n    this.applyForce(pull, mass);\n  }\n\n  // Method to update position\n  update() {\n    // Update velocity\n    this.velocity.add(this.acceleration);\n    // Limit speed\n    this.velocity.limit(this.maxspeed);\n    this.position.add(this.velocity);\n    // Reset acceleration to 0 each cycle\n    this.acceleration.mult(0);\n  }\n\n  // A method that calculates and applies a steering force towards a target\n  // STEER = DESIRED MINUS VELOCITY\n  seek(target) {\n    const desired = Vector.sub(target, this.position);  // A vector pointing from the position to the target\n    // Scale to maximum speed\n    desired.normalize();\n    desired.mult(this.maxspeed);\n \n    // Steering = Desired minus Velocity\n    let steer = Vector.sub(desired, this.velocity);\n    steer.limit(this.maxforce * 1);  // Limit to maximum steering force\n    return steer;\n  }\n\n  // Wraparound\n  borders() {\n    return;\n    // if (this.position.x < -this.r) this.velocity.x *= -1;\n    // if (this.position.y < -this.r) this.velocity.y *= -1;\n    // if (this.position.x > this.r) this.velocity.x *= -1;\n    // if (this.position.y > this.r) this.velocity.y *= -1;\n  }\n\n  // Separation\n  // Method checks for nearby boids and steers away\n  separate(boids) {\n    const desiredseparation = 40.0;\n    const steer = new Vector(0, 0, 0);\n    let count = 0;\n    // For every boid in the system, check if it's too close\n    boids.forEach((other) => {\n      let d = this.position.distanceTo(other.position);\n      // If the distance is greater than 0 and less than an arbitrary amount (0 when you are yourself)\n      if ((d > 0) && (d < desiredseparation)) {\n        // Calculate vector pointing away from neighbor\n        let diff = Vector.sub(this.position, other.position);\n        diff.normalize();\n        diff.div(d);        // Weight by distance\n        steer.add(diff);\n        count++;            // Keep track of how many\n      }\n    });\n\n    // Average -- divide by how many\n    if (count > 0) {\n      steer.div(count);\n    }\n\n    // As long as the vector is greater than 0\n    if (steer.mag() > 0) {\n      // Implement Reynolds: Steering = Desired - Velocity\n      steer.normalize();\n      steer.mult(this.maxspeed);\n      steer.sub(this.velocity);\n      steer.limit(this.maxforce);\n    }\n\n    return steer;\n  }\n\n  // Alignment\n  // For every nearby boid in the system, calculate the average velocity\n  align(boids) {\n    const neighbordist = 300;\n    const sum = new Vector(0, 0);\n    let count = 0;\n    boids.forEach(other => {\n      let d = Vector.dist(this.position, other.position);\n      if ((d > 0) && (d < neighbordist)) {\n        sum.add(other.velocity);\n        count++;\n      }\n    });\n\n    if (count > 0) {\n      sum.div(count);\n      // Implement Reynolds: Steering = Desired - Velocity\n      sum.normalize();\n      sum.mult(this.maxspeed);\n      let steer = Vector.sub(sum, this.velocity);\n      steer.limit(this.maxforce);\n      return steer;\n    } \n    else {\n      return new Vector(0, 0);\n    }\n  }\n\n  // Cohesion\n  // For the average position (i.e. center) of all nearby boids, calculate steering vector towards that position\n  cohesion(boids) {\n    const neighbordist = 300;\n    let sum = new Vector(0, 0);   // Start with empty vector to accumulate all positions\n    let count = 0;\n    boids.forEach(other => {\n      let d = Vector.dist(this.position, other.position);\n      if ((d > 0) && (d < neighbordist)) {\n        sum.add(other.position); // Add position\n        count++;\n      }\n    })\n\n    if (count > 0) {\n      sum.div(count);\n      return this.seek(sum);  // Steer towards the position\n    } \n    else {\n      return new Vector(0, 0);\n    }\n  }\n}","import {Flock, Boid} from './flock';\nlet createRandom = require('ngraph.random');\n\nexport default function createFakeLayout(graph) {\n  let nodes = new Map();\n  let random = createRandom(42);\n  const flock = new Flock(graph);\n  \n  return {\n    addNode,\n    getNodePosition,\n    setDesiredNodePosition,\n    step\n  };\n\n  function addNode(nodeId) {\n    const pos = {\n      x: (random.nextDouble() - 0.5) * 1000,\n      y: (random.nextDouble() - 0.5) * 1000\n    }\n    const boid = new Boid(pos.x, pos.y);\n    flock.addBoid(nodeId, boid);\n    nodes.set(nodeId, boid);\n    return boid;\n  }\n\n  function getNodePosition(nodeId) {\n    let pos = nodes.get(nodeId)\n    if (!pos) {\n      pos = addNode(nodeId);\n    } \n    return pos.position;\n  }\n\n  function step() {\n    flock.run();\n  }\n\n  function setDesiredNodePosition(nodeId, pos) {\n    flock.setDesiredBoidPosition(nodeId, pos);\n  }\n}","export default function createInterpolateLayout(from, to, duration = 100) {\n  let t = 0;\n  let elapsed = 0;\n\n  return {\n    step,\n    getNodePosition,\n    done,\n  };\n\n  function step() {\n    elapsed += 1;\n  }\n\n  function done() {\n    return elapsed > duration;\n  }\n\n  function getNodePosition(nodeId) {\n    t = ease(elapsed/duration);\n    let fromPos = from.getNodePosition(nodeId);\n    let toPos = to.getNodePosition(nodeId);\n\n    return {\n      x: fromPos.x * (1 - t) + toPos.x * t,\n      y: fromPos.y * (1 - t) + toPos.y * t\n    }\n  }\n\n  function ease(t) {\n    return t*(2-t);\n  }\n}","import  Delaunator from 'delaunator';\nimport createGraph from 'ngraph.graph';\n\nexport default function getDelaunayGraph(vertices) {\n  const delaunay = Delaunator.from(vertices);\n  const triangles = delaunay.triangles;\n  const triangulationGraph = createGraph()\n  vertices.forEach(v => {\n    triangulationGraph.addNode(v.id, v);\n  });\n\n  for (let i = triangles.length; i;) {\n    --i\n    const first = vertices[triangles[i]]\n    --i\n    const second = vertices[triangles[i]]\n    --i\n    const third = vertices[triangles[i]]\n\n    addTriangulationLink(first.id, second.id, triangulationGraph)\n    addTriangulationLink(second.id, third.id, triangulationGraph)\n    addTriangulationLink(third.id, first.id, triangulationGraph)\n  }\n\n  return triangulationGraph;\n}\n\nfunction addTriangulationLink (fromId, toId, tGraph) {\n  tGraph.addLink(fromId, toId)\n}\n","const createGraph = require('ngraph.graph')\n\nexport default function makeSpanningTree(mstEdges) {\n  const graph = createGraph();\n\n  mstEdges.forEach(e => {\n    graph.addLink(e.from.id, e.to.id)\n  })\n\n  // Doesn't really matter what is the root\n  const rootId = mstEdges[0].from.id\n\n  return {\n    getGraph() {\n      return graph\n    },\n    getRootId() {\n      return rootId\n    },\n    get(id) {\n      return graph.gentNode(id)\n    }\n  }\n}\n","import findMinimumSpanningTree from 'ngraph.kruskal';\nimport getDelaunayGraph from './getDelaunayGraph';\nimport makeSpanningTree from './makeSpanningTree';\nvar randomAPI = require('ngraph.random');\n\nclass EdgeModel {\n  constructor (from, to) {\n    this.from = from\n    this.to = to\n  }\n}\n\n/**\n * For a given set of rectangles, removes overlaps\n *\n * @param {Map} rectangles - rectId -> Rectangle mapping\n */\nexport default function removeOverlaps(rectangles, options) {\n  // Convert rectangle centers into vertices, that we can feed into Delaunay\n  // triangulation\n  const vertices = []\n  options = options || {}\n\n  const canMove = options.canMove || yes\n  const pullX = options.pullX || false\n  const pullY = options.pullY || false\n\n  if (rectangles.size < 2) {\n    return;\n  }\n  if (rectangles.size === 2) {\n    // we cannot triangulate this, so let's just cal it directly\n    let arrayOfRects = Array.from(rectangles).map(x => x[1]);\n\n    removeOverlapsForRectangles(arrayOfRects[0], arrayOfRects[1]);\n    return;\n  }\n\n  rectangles.forEach(r => {\n    const pair = [r.cx, r.cy]\n    pair.id = r.id\n    vertices.push(pair)\n  })\n\n  let totalMovement = 0;\n  const triangulationGraph = getDelaunayGraph(vertices)\n  triangulationGraph.forEachLink(addTriangulationLinkWeight);\n\n  const mst = findMinimumSpanningTree(triangulationGraph, e => e.data)\n  const mstEdges = mst.map(edge => new EdgeModel(\n    getRect(edge.fromId),\n    getRect(edge.toId)\n  ));\n\n  var randomIterator = randomAPI.randomIterator(mstEdges);\n  randomIterator.shuffle();\n\n  let spanningTree\n  if (mstEdges.length > 0) {\n    spanningTree = makeSpanningTree(mstEdges)\n\n    grow(spanningTree)\n  }\n\n  return totalMovement;\n\n  function getRect (id) {\n    return rectangles.get(id)\n  }\n\n  function grow(spanningTree) {\n    const spanningGraph = spanningTree.getGraph()\n\n    const processed = new Set()\n    growAt(spanningTree.getRootId())\n\n    function growAt(nodeId) {\n      if (processed.has(nodeId)) return\n\n      processed.add(nodeId)\n\n      const rootPos = getRect(nodeId)\n\n      spanningGraph.forEachLinkedNode(nodeId, otherNode => {\n        if (processed.has(otherNode.id)) return\n\n        const childPos = getRect(otherNode.id)\n        removeOverlapsForRectangles(rootPos, childPos);\n        growAt(otherNode.id)\n      })\n    }\n  }\n\n  function removeOverlapsForRectangles(rootPos, childPos) {\n    if (overlaps(rootPos, childPos)) {\n      let t = getOverlapFactor(rootPos, childPos)\n      let dx = (childPos.cx - rootPos.cx)\n      let dy = (childPos.cy - rootPos.cy)\n\n      if (!Number.isFinite(t)) {\n        t = 1\n        dx = 1e-3\n        dy = -1e-3\n      }\n\n      if (canMove(childPos.id)) {\n        childPos.cx = rootPos.cx + t * dx\n        childPos.cy = rootPos.cy + t * dy\n      } else {\n        rootPos.cx = childPos.cx - t * dx\n        rootPos.cy = childPos.cy - t * dy\n      }\n      totalMovement += Math.sqrt(t * t * (dx * dx + dy * dy));\n    }\n  }\n\n  /**\n  * Given two rectangles returns a value by which they overlap\n  */\n  function getOverlapFactor (a, b) {\n    const dx = Math.abs(a.cx - b.cx)\n    const dy = Math.abs(a.cy - b.cy)\n\n    const wx = (a.width + b.width) / 2\n    const wy = (a.height + b.height) / 2\n\n    const t = Math.min(wx / dx, wy / dy)\n    return t\n  }\n\n  function addTriangulationLinkWeight(link) {\n    const from = getRect(link.fromId)\n    const to = getRect(link.toId)\n    const weight = getTriangulationWeight(from, to)\n    link.data = weight;\n  }\n\n  function getTriangulationWeight(a, b) {\n    if (overlaps(a, b)) {\n      const centerDistance = getPointDistance(a, b)\n      const t = getOverlapFactor(a, b)\n      return -(t - 1) * centerDistance\n    }\n\n    return getRectangularDistance(a, b)\n  }\n\n  function overlaps(a, b) {\n    if (pullX) {\n      return true;\n    }\n    // If one rectangle is on left side of other\n    // NOTE: This gives funny results when we always return true\n    if (a.left > b.right || b.left > a.right) return pullX\n\n    // If one rectangle is above other\n    if (a.top > b.bottom || b.top > a.bottom) return pullY\n\n    return true\n  }\n\n  function getRectangularDistance(a, b) {\n    if (overlaps(a, b)) return 0\n    let dx = 0\n    let dy = 0\n\n    if (a.right < b.left) {\n      dx = b.right - a.left\n    } else if (b.right < a.left) {\n      dx = a.left - b.right\n    }\n\n    if (a.top < b.bottom) {\n      dy = b.bottom - a.top\n    } else if (b.top < a.bottom) {\n      dy = a.bottom - b.top\n    }\n\n    return Math.sqrt(dx * dx + dy * dy)\n  }\n\n  function getPointDistance(a, b) {\n    const dx = a.cx - b.cx\n    const dy = a.cy - b.cy\n\n    return Math.sqrt(dx * dx + dy * dy)\n  }\n}\n\nfunction yes() {\n  return true\n}\n","export default class Rect {\n  constructor (params) {\n    Object.assign(this, params)\n    if (!isNumber(this.left)) throw new Error('Left is wrong')\n    if (!isNumber(this.top)) throw new Error('top is wrong')\n    if (!isNumber(this.width)) throw new Error('width is wrong')\n    if (!isNumber(this.height)) throw new Error('height is wrong')\n  }\n\n  inflate(factor) {\n    this.left += factor * this.width/2;\n    this.top += factor * this.height/2;\n    this.width *= factor;\n    this.height *= factor;\n  }\n\n  get right () {\n    return this.left + this.width\n  }\n\n  get bottom () {\n    return this.top + this.height\n  }\n\n  get cx () {\n    return this.left + this.width / 2\n  }\n\n  get cy () {\n    return this.top + this.height / 2\n  }\n\n  set cx (x) {\n    this.left = x - this.width / 2\n  }\n\n  set cy (y) {\n    this.top = y - this.height / 2\n  }\n}\n\nfunction isNumber (x) {\n  if (!Number.isFinite(x)) return false\n  return true\n}\n","import createFakeLayout from './layout/boidLayout';\nimport createInterpolateLayout from './createInterpolateLayout';\nimport removeOverlaps from './layout/removeOverlaps';\nimport Rect from './layout/Rect';\n\nlet eventify = require('ngraph.events');\n\nlet createLayout = require('ngraph.forcelayout')\nconst USE_FAKE = 1;\nconst USE_INTERPOLATE = 2;\nconst REMOVE_OVERLAPS = 3;\nconst USE_REAL = 4;\n\n/**\n * Orchestrates layout of algorithm between phases.\n */\nexport default function createAggregateLayout(graph, progress) {\n  let physicsLayout = createPhysicsLayout(graph);\n  let fakeLayout = createFakeLayout(graph);\n  let interpolateLayout = createInterpolateLayout(fakeLayout, physicsLayout);\n\n  let isGraphReady = false;\n  let layoutIterations = 0;\n  let layoutTime = 0;\n  let maxLayoutIterations = 2000;\n  let maxLayoutTime = 2000;\n  let phase = USE_FAKE;\n  let rectangles = new Map();\n\n  var api = eventify({\n    step,\n    pinNode,\n    getNodePosition,\n    addNode,\n    setGraphReady,\n    getGraphReady\n  })\n\n  return api;\n\n  function setGraphReady() {\n    layoutIterations = 0;\n    layoutTime = 0;\n    isGraphReady = true;\n  }\n\n  function getGraphReady() {\n    return isGraphReady;\n  }\n\n  function addNode(nodeId, rect) {\n    fakeLayout.addNode(nodeId, rect);\n    rectangles.set(nodeId, rect);\n  }\n\n  function getNodePosition(nodeId) {\n    if (phase === USE_FAKE || phase === REMOVE_OVERLAPS) return fakeLayout.getNodePosition(nodeId);\n    if (phase === USE_REAL) return physicsLayout.getNodePosition(nodeId);\n    if (phase === USE_INTERPOLATE) return interpolateLayout.getNodePosition(nodeId);\n  }\n\n  function step() {\n    if (!isGraphReady || layoutIterations < maxLayoutIterations) {\n      phase = USE_FAKE;\n      let start = window.performance.now();\n      fakeLayout.step();\n\n      do {\n        physicsLayout.step();\n        layoutIterations += 1;\n      } while (window.performance.now() - start < 10)\n      layoutTime += window.performance.now() - start;\n      \n\n      if (layoutTime > maxLayoutTime) layoutIterations = maxLayoutIterations;\n      const finished = Math.min(1, Math.max(layoutTime/maxLayoutTime, layoutIterations/maxLayoutIterations));\n      syncLayouts();\n\n      progress.setLayoutCompletion(Math.round(finished * 100));\n\n      if (layoutIterations >= maxLayoutIterations) phase = REMOVE_OVERLAPS;\n\n      return true;\n    } else if (phase === REMOVE_OVERLAPS) {\n      runOverlapsRemoval();\n      phase = USE_INTERPOLATE;\n\n      return true;\n    } else if (phase === USE_INTERPOLATE) {\n      interpolateLayout.step();\n      if (interpolateLayout.done()) {\n        phase = USE_REAL;\n        api.fire('ready', api);\n      }\n      return true;\n    } \n\n    return false;\n  }\n\n  function syncLayouts() {\n    graph.forEachNode(function (node) {\n      var pos = physicsLayout.getNodePosition(node.id);\n      fakeLayout.setDesiredNodePosition(node.id, pos);\n    })\n  }\n\n  function runOverlapsRemoval() {\n    // TODO: Async?\n    let rectangles = getRectangles();\n    let move = 0, delta = 0; \n    do {\n      let newMove = removeOverlaps(rectangles);\n      delta = Math.abs(newMove - move);\n      move = newMove;\n    } while (delta > 1);\n    rectangles.forEach((rect, nodeId) => {\n      physicsLayout.setNodePosition(nodeId, rect.left - rect.dx, rect.top - rect.dy);\n    });\n  }\n\n  function getRectangles() {\n    let rects = new Map();\n    rectangles.forEach((rect, id) => {\n      let pos = physicsLayout.getNodePosition(id);\n      let {width, height} = rect;\n      const inflatedRect = new Rect({\n        id, \n        left: pos.x + rect.x,\n        top: pos.y + rect.y,\n        dx: rect.x,\n        dy: rect.y,\n        width,\n        height,\n      });\n      rects.set(id, inflatedRect);\n    });\n\n    return rects;\n  }\n\n  function pinNode(node) {\n    physicsLayout.pinNode(node, true);\n  }\n\n  function createPhysicsLayout() {\n    return createLayout(graph, {\n      springLength: 20,\n      springCoeff: 0.002,\n      gravity: -1.2,\n      theta: 0.8,\n      dragCoeff: 0.02,\n      timeStep: 14,\n      nodeMass(nodeId) {\n        let links = graph.getLinks(nodeId);\n        let mul = links ? links.length : 1;\n        let node = graph.getNode(nodeId);\n        mul *=  node.data.size * 3;\n        let mass = nodeId.length * mul;\n        return mass || 1;\n      }\n    });\n  }\n}","/**\n * A simple utility which animates links into appearance.\n */\nlet svg = require('simplesvg');\nlet random = require('ngraph.random')(42);\nlet eventify = require('ngraph.events');\n\nexport default function createLinkAnimator(graph, layout, edgeContainer) {\n  /**\n   * Maps link id into {ui, link} - where `ui` is ui element that renders\n   * `link` from a graph.\n   */\n  const links = new Map();\n  const scheduled = [];\n\n  let beingAnimated = new Map();\n  let maxAnimations = 20;\n  let maxDepth = graph.maxDepth;\n\n  graph.forEachLink(scheduleLink);\n\n  scheduled.sort((a, b) => {\n    return getLinkScore(a) - getLinkScore(b);\n  });\n\n  let processor = requestAnimationFrame(processNext);\n\n  const linkAnimator = eventify({\n    /**\n     * Gets {ui, link} for a given link id.\n     */\n    getLinkInfo,\n\n    /**\n     * Stops all animations.\n     */\n    dispose\n  });\n\n  return linkAnimator;\n\n  function dispose() {\n    if (processor) {\n      cancelAnimationFrame(processor);\n      processor = null;\n    }\n  }\n\n  function processNext() {\n    while (beingAnimated.size < maxAnimations && scheduled.length > 0) {\n      let link = scheduled.pop();\n      let speed = Math.round(Math.abs(random.gaussian() * 30)) + 1;\n      beingAnimated.set(link.id, animateLink(link, speed));\n    }\n\n    beingAnimated.forEach(function(el, key) {\n      el.step();\n      if (el.isDone) beingAnimated.delete(key);\n    });\n\n    if (scheduled.length > 0 || beingAnimated.size > 0) {\n      processor = requestAnimationFrame(processNext);\n    }\n  }\n\n  function getLinkInfo(linkId) {\n    return links.get(linkId);\n  }\n\n  function getLinkScore(link) {\n    let fromNode = graph.getNode(link.fromId).data;\n    let toNode = graph.getNode(link.toId).data;\n    const depth = (fromNode.depth + toNode.depth) / 2;\n    return (maxDepth - depth) / maxDepth;\n  }\n\n  function scheduleLink(link) {\n    scheduled.push(link);\n  }\n\n  function animateLink(link, maxT) {\n    var frame = 0;\n    let from = layout.getNodePosition(link.fromId);\n    let to = layout.getNodePosition(link.toId);\n\n    const dRatio = getLinkScore(link);\n    const strokeWidth = 8 * dRatio + 2;\n    const color = Math.round((200 - 75) * (1 - dRatio) + 75);\n\n    let api = {\n      step,\n      isDone: false\n    };\n\n    return api;\n\n    function step() {\n      let t = ease(frame / maxT);\n      let x = from.x * (1 - t) + to.x * t;\n      let y = from.y * (1 - t) + to.y * t;\n      let linkInfo = links.get(link.id);\n      let pathData = `M${from.x},${from.y} L${x},${y}`;\n      if (!linkInfo) {\n        const ui = svg('path', {\n          id: link.id,\n          'stroke-width': strokeWidth,\n          fill: 'black',\n          stroke: `rgb(${color}, ${color}, ${color})`,\n          d: pathData\n        });\n\n        const linkInfo = { ui, link };\n        links.set(link.id, linkInfo);\n        linkAnimator.fire('beforeAddLink', linkInfo);\n\n        edgeContainer.appendChild(ui);\n      } else {\n        linkInfo.ui.attr('d', pathData);\n      }\n      frame += 1;\n      if (frame > maxT) {\n        api.isDone = true;\n      }\n    }\n  }\n}\n\nfunction ease(t) {\n  return t * (2 - t);\n}\n","import createPanZoom from 'panzoom';\nimport createTextMeasure from './measureText';\nimport createAggregateLayout from './aggregateLayout';\nimport bus from '../bus';\nimport createLinkAnimator from './renderer/linkAnimator';\n\nlet svg = require('simplesvg');\n\nexport default function createRenderer(progress) {\n  const scene = document.querySelector('#scene');\n  const nodeContainer = scene.querySelector('#nodes');\n  const edgeContainer = scene.querySelector('#edges');\n  let lastPanTime = 0;\n  let lastTouchEndTime = 0;\n  let clickTimeout;\n\n  const panzoom = createPanZoom(scene);\n  const defaultRectangle = { left: -500, right: 500, top: -500, bottom: 500 };\n  panzoom.showRectangle(defaultRectangle);\n\n  // maps node id to node ui\n  let nodes = new Map();\n\n  let layout,\n    graph,\n    currentLayoutFrame = 0,\n    linkAnimator;\n  let textMeasure = createTextMeasure(scene);\n  bus.on('graph-ready', onGraphReady);\n\n  return {\n    render,\n    dispose\n  };\n\n  function dispose() {\n    clearLastScene();\n    bus.off('graph-ready', onGraphReady);\n  }\n\n  function onMouseClick(e) {\n    const clickTarget = e.target;\n    if (!nodeContainer.contains(clickTarget)) return;\n\n    let nodeId = getNodeIdFromUI(clickTarget);\n    bus.fire('show-subreddit', nodeId);\n\n    highlightNode(nodeId);\n  }\n\n  function highlightNode(nodeId) {\n    removeClass('hovered');\n\n    const mainNode = nodes.get(nodeId);\n    makeHovered(mainNode);\n    graph.forEachLinkedNode(nodeId, function(otherNode, link) {\n      const ui = nodes.get(otherNode.id);\n      ui.classList.add('hovered');\n      moveToFront(ui);\n\n      const linkInfo = linkAnimator.getLinkInfo(link.id);\n      if (linkInfo) {\n        const linkUI = linkInfo.ui;\n        makeHovered(linkUI);\n        moveToFront(linkUI);\n      }\n    });\n    moveToFront(mainNode);\n  }\n\n  function onBeforeLinkAdded(linkInfo) {\n    let { link, ui } = linkInfo;\n    if (link.fromId === graph.rootId || link.toId === graph.rootId) {\n      makeHovered(ui);\n      let toUI = nodeContainer.querySelector('#node-' + link.toId);\n      makeHovered(toUI);\n\n      let fromUI = nodeContainer.querySelector('#node-' + link.fromId);\n      makeHovered(fromUI);\n    }\n  }\n\n  function makeHovered(ui) {\n    ui.classList.add('hovered');\n  }\n\n  function onDoubleClickMouse(e) {\n    const clickTarget = e.target;\n    if (!nodeContainer.contains(clickTarget)) return;\n\n    e.stopPropagation(); // so that we don't zoom\n    onDoubleClick(e);\n  }\n\n  function onDoubleClick(e) {\n    const clickTarget = e.target;\n    if (!nodeContainer.contains(clickTarget)) return;\n\n    let nodeId = getNodeIdFromUI(clickTarget);\n    if (nodeId) {\n      bus.fire('new-search', nodeId);\n      panzoom.showRectangle(defaultRectangle);\n    }\n  }\n\n  function moveToFront(el) {\n    const { parentNode } = el;\n    parentNode.removeChild(el);\n    parentNode.appendChild(el);\n  }\n\n  function getNodeIdFromUI(el) {\n    while (el) {\n      if (el.classList.contains('node')) return el.id.slice('node-'.length);\n      el = el.parentNode;\n    }\n  }\n\n  function removeClass(className) {\n    const elements = scene.querySelectorAll(`.${className}`);\n    if (elements) {\n      for (let i = 0; i < elements.length; ++i) {\n        elements[i].classList.remove(className);\n      }\n    }\n  }\n\n  function render(newGraph) {\n    clearLastScene();\n    graph = newGraph;\n\n    layout = createAggregateLayout(graph, progress);\n\n    layout.on('ready', drawLinks);\n\n    nodes = new Map();\n\n    graph.forEachNode(addNode);\n    graph.on('changed', onGraphStructureChanged);\n\n    cancelAnimationFrame(currentLayoutFrame);\n    currentLayoutFrame = requestAnimationFrame(frame);\n  }\n\n  function onGraphReady(readyGraph) {\n    if (readyGraph === graph) {\n      layout.setGraphReady();\n      progress.startLayout();\n    }\n  }\n\n  function frame() {\n    if (layout.step()) {\n      currentLayoutFrame = requestAnimationFrame(frame);\n    }\n    updatePositions();\n  }\n\n  function onGraphStructureChanged(changes) {\n    changes.forEach(change => {\n      if (change.changeType === 'add' && change.node) {\n        addNode(change.node);\n      }\n    });\n  }\n\n  function drawLinks() {\n    progress.done();\n    linkAnimator = createLinkAnimator(graph, layout, edgeContainer);\n    document.addEventListener('click', onMouseClick);\n    document.addEventListener('dblclick', onDoubleClickMouse, true);\n    document.addEventListener('touchend', onTouchEnd);\n    linkAnimator.on('beforeAddLink', onBeforeLinkAdded);\n\n    panzoom.on('pan', onPan);\n  }\n\n  function clearLastScene() {\n    clear(nodeContainer);\n    clear(edgeContainer);\n\n    document.removeEventListener('click', onMouseClick);\n    document.removeEventListener('dblclick', onDoubleClickMouse, true);\n    document.removeEventListener('touchend', onTouchEnd);\n\n    panzoom.off('pan', onPan);\n    if (layout) layout.off('ready', drawLinks);\n    if (graph) graph.off('changed', onGraphStructureChanged);\n    if (linkAnimator) linkAnimator.dispose();\n  }\n\n  function onTouchEnd(e) {\n    let now = new Date();\n    let dTouchEnd = now - lastTouchEndTime;\n    let dPan = now - lastPanTime;\n    lastTouchEndTime = now;\n    clearTimeout(clickTimeout);\n\n    if (dPan < 500) {\n      return;\n    }\n    if (dTouchEnd < 300) {\n      onDoubleClick(e);\n      return;\n    }\n    // console.log(\"tap\", e.target);\n    clickTimeout = setTimeout(() => onMouseClick(e), 320);\n  }\n\n  function onPan() {\n    lastPanTime = new Date();\n  }\n\n  function clear(el) {\n    while (el.lastChild) {\n      el.removeChild(el.lastChild);\n    }\n  }\n\n  function addNode(node) {\n    const dRatio = node.data.size * 1.2; // (graph.maxDepth - node.data.depth)/graph.maxDepth;\n    let pos = getNodePosition(node.id);\n    if (node.data.depth === 0) {\n      layout.pinNode(node);\n    }\n\n    const uiAttributes = getNodeUIAttributes(node.id, dRatio);\n    layout.addNode(node.id, uiAttributes);\n\n    const rectAttributes = {\n      x: uiAttributes.x,\n      y: uiAttributes.y,\n      width: uiAttributes.width,\n      height: uiAttributes.height,\n      rx: uiAttributes.rx,\n      ry: uiAttributes.ry,\n      fill: 'white',\n      'stroke-width': uiAttributes.strokeWidth,\n      stroke: '#aaa' // '#58585A'\n    };\n    const textAttributes = {\n      'font-size': uiAttributes.fontSize,\n      x: uiAttributes.px,\n      y: uiAttributes.py\n    };\n\n    const rect = svg('rect', rectAttributes);\n    const text = svg('text', textAttributes);\n    text.text(node.id);\n\n    const ui = svg('g', {\n      class: 'node',\n      id: 'node-' + node.id,\n      transform: `translate(${pos.x}, ${pos.y})`\n    });\n\n    ui.appendChild(rect);\n    ui.appendChild(text);\n\n    nodeContainer.appendChild(ui);\n    nodes.set(node.id, ui);\n  }\n\n  function getNodeUIAttributes(nodeId, dRatio) {\n    const fontSize = 24 * dRatio + 12;\n    const size = textMeasure(nodeId, fontSize);\n    const width = size.totalWidth + size.spaceWidth * 6;\n    const height = fontSize * 1.6;\n\n    return {\n      fontSize,\n      width,\n      height,\n      x: -width / 2,\n      y: -height / 2,\n      rx: 15 * dRatio + 2,\n      ry: 15 * dRatio + 2,\n      px: -width / 2 + size.spaceWidth * 3,\n      py: -height / 2 + fontSize * 1.1,\n      strokeWidth: 4 * dRatio + 1\n    };\n  }\n\n  function updatePositions() {\n    nodes.forEach((ui, nodeId) => {\n      let pos = getNodePosition(nodeId);\n      ui.attr('transform', `translate(${pos.x}, ${pos.y})`);\n    });\n  }\n\n  function getNodePosition(nodeId) {\n    return layout.getNodePosition(nodeId);\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('div',{staticClass:\"background absolute\",on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}}),_c('div',{staticClass:\"content\"},[_c('h3',[_vm._v(\" Related subreddits \"),_c('a',{staticClass:\"close bold highlight\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}},[_vm._v(\"close\")])]),_c('p',[_vm._v(\"This website shows you a graph of related subreddits for any given one\")]),_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":\"https://i.imgur.com/1dJiwRC.png\",\"alt\":\"Related Subreddits\"}}),_c('p',[_vm._v(\" The relationship is determined by a metric \\\"users who posted to this subreddit also post to...\\\". Under the hood I'm using Jaccard Similarity to determine degree of similarity. \")]),_vm._m(0),_c('p',[_vm._v(\"I hope you like it! Please let me know.\")]),_vm._m(1),_c('a',{staticClass:\"large-close bold highlight\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.close($event)}}},[_vm._v(\"close\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_vm._v(\" Find the source code \"),_c('a',{staticClass:\"highlight\",attrs:{\"href\":\"http://github.com/anvaka/sayit\"}},[_vm._v(\"on GitHub.\")])]),_c('li',[_vm._v(\" Stay tuned for updates on \"),_c('a',{staticClass:\"highlight\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"Twitter.\")])]),_c('li',[_c('a',{staticClass:\"highlight\",attrs:{\"href\":\"https://www.patreon.com/anvaka\"}},[_vm._v(\"Support me on Patreon\")]),_vm._v(\" . \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"With passion, \"),_c('br'),_vm._v(\"Anvaka \")])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"about\">\n    <div class=\"background absolute\" @click.prevent=\"close\"></div>\n    <div class=\"content\">\n      <h3>\n        Related subreddits\n        <a class=\"close bold highlight\" href=\"#\" @click.prevent=\"close\">close</a>\n      </h3>\n      <p>This website shows you a graph of related subreddits for any given one</p>\n      <img src=\"https://i.imgur.com/1dJiwRC.png\" alt=\"Related Subreddits\" style=\"width: 100%;\">\n\n      <p>\n        The relationship is determined by a metric \"users who posted to this subreddit also post to...\".\n        Under the hood I'm using Jaccard Similarity to determine degree of similarity.\n      </p>\n      <ul>\n        <li>\n          Find the source code\n          <a href=\"http://github.com/anvaka/sayit\" class=\"highlight\">on GitHub.</a>\n        </li>\n        <li>\n          Stay tuned for updates on\n          <a href=\"https://twitter.com/anvaka\" class=\"highlight\">Twitter.</a>\n        </li>\n        <li>\n          <a href=\"https://www.patreon.com/anvaka\" class=\"highlight\">Support me on Patreon</a> .\n        </li>\n      </ul>\n      <p>I hope you like it! Please let me know.</p>\n      <p>With passion,\n        <br>Anvaka\n      </p>\n      <a href=\"#\" @click.prevent=\"close\" class=\"large-close bold highlight\">close</a>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  mounted() {\n    this.closeHandler = e => {\n      if (e.keyCode === 27) {\n        e.preventDefault();\n        this.close();\n      }\n    };\n    document.addEventListener(\"keyup\", this.closeHandler);\n  },\n  beforeDestroy() {\n    document.removeEventListener(\"keyup\", this.closeHandler);\n  },\n  methods: {\n    close() {\n      this.$emit(\"close\");\n    }\n  }\n};\n</script>\n\n<style lang='stylus'>\n.about {\n  position: fixed;\n  overflow: hidden;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n\n  .close {\n    position: absolute;\n    right: 15px;\n    font-size: 12px;\n  }\n\n  .large-close {\n    width: 100%;\n    height: 32px;\n    display: block;\n    text-align: center;\n  }\n\n  .content {\n    overflow-y: auto;\n    max-height: 100%;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 -1px 0px rgba(0, 0, 0, 0.02);\n    position: absolute;\n    background-color: white;\n    width: 400px;\n    padding: 14px;\n    border: 1px solid #58585A;\n\n    h3 {\n      margin: 0;\n      font-weight: normal;\n    }\n  }\n}\n\n.background {\n  position: absolute;\n  background-color: #58585A;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n@media (max-width: 800px) {\n  .about {\n    justify-content: initial;\n  }\n\n  .about .content {\n    width: 100%;\n    border: none;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./About.vue?vue&type=template&id=2dfb328f&\"\nimport script from \"./About.vue?vue&type=script&lang=js&\"\nexport * from \"./About.vue?vue&type=script&lang=js&\"\nimport style0 from \"./About.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ak-typeahead\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentQuery),expression:\"currentQuery\"}],ref:\"input\",attrs:{\"autofocus\":\"\",\"readonly\":_vm.readonly,\"autocomplete\":\"off\",\"autocorrect\":\"off\",\"autocapitalize\":\"off\",\"spellcheck\":\"false\",\"placeholder\":_vm.placeholder},domProps:{\"value\":(_vm.currentQuery)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.currentQuery=$event.target.value},_vm.getSuggestionsInternal],\"keydown\":_vm.cycleTheList}}),(_vm.currentQuery)?_c('a',{staticClass:\"search-submit\",attrs:{\"type\":\"submit\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.pickCurrentText($event)}}},[_vm._v(\"Go\")]):_vm._e(),(_vm.showSuggestions)?_c('ul',{staticClass:\"suggestions\"},_vm._l((_vm.suggestions),function(suggestion,index){return _c('li',{key:index},[_c('a',{staticClass:\"suggestion\",class:{selected: suggestion.selected},attrs:{\"href\":\"#\"},domProps:{\"innerHTML\":_vm._s(suggestion.html)},on:{\"click\":function($event){$event.preventDefault();return _vm.pickSuggestion(suggestion)}}})])}),0):_vm._e(),(_vm.showLoading)?_c('ul',{staticClass:\"suggestions\"},[_c('li',{staticClass:\"searching\"},[(!_vm.loadingError)?_c('span',[_vm._v(\"Searching...\")]):_vm._e(),(_vm.loadingError)?_c('div',{staticClass:\"loading-error\"},[_c('div',[_vm._v(\"Failed to get reddit completions:\")]),_c('pre',[_vm._v(_vm._s(_vm.loadingError))])]):_vm._e()])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ak-typeahead\">\n    <input\n      v-model=\"currentQuery\"\n      ref=\"input\"\n      autofocus\n      :readonly=\"readonly\"\n      autocomplete=\"off\"\n      autocorrect=\"off\"\n      autocapitalize=\"off\"\n      spellcheck=\"false\"\n      :placeholder=\"placeholder\"\n      @input=\"getSuggestionsInternal\"\n      @keydown=\"cycleTheList\"\n    >\n    <a\n      type=\"submit\"\n      class=\"search-submit\"\n      href=\"#\"\n      @click.prevent=\"pickCurrentText\"\n      v-if=\"currentQuery\"\n    >Go</a>\n    <ul v-if=\"showSuggestions\" class=\"suggestions\">\n      <li v-for=\"(suggestion, index) in suggestions\" :key=\"index\">\n        <a\n          @click.prevent=\"pickSuggestion(suggestion)\"\n          class=\"suggestion\"\n          :class=\"{selected: suggestion.selected}\"\n          href=\"#\"\n          v-html=\"suggestion.html\"\n        ></a>\n      </li>\n    </ul>\n\n    <ul v-if=\"showLoading\" class=\"suggestions\">\n      <li class=\"searching\">\n        <span v-if=\"!loadingError\">Searching...</span>\n        <div v-if=\"loadingError\" class=\"loading-error\">\n          <div>Failed to get reddit completions:</div>\n          <pre>{{loadingError}}</pre>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<style lang='stylus'>\n@import '../vars.styl';\n\n.ak-typeahead {\n  height: 100%;\n  flex: 1;\n  align-items: stretch;\n\n  input::-ms-clear {\n    display: none;\n  }\n}\n\n.search-submit {\n  color: #B2B2B2;\n  position: absolute;\n  right: 0;\n  top: 0;\n  height: 100%;\n  align-items: center;\n  text-decoration: none;\n  display: flex;\n  flex-shrink: 0;\n  width: 48px;\n  justify-content: center;\n  outline: none;\n\n  &:hover, &:focus {\n    color: background-color;\n    background: highlight-color;\n  }\n}\n\n.suggestion {\n  display: block;\n  width: 100%;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  padding-left: 10px;\n  text-decoration: none;\n  font-weight: bold;\n  color: primary-text;\n\n  b {\n    font-weight: normal;\n  }\n}\n\n.suggestion:hover, .suggestion.selected {\n  background-color: #eee;\n}\n\n.suggestions {\n  position: absolute;\n  top: 48px;\n  width: 100%;\n  padding: 0;\n  background: white;\n  list-style-type: none;\n  margin: 0;\n  border-top: 1px solid $border-color;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\n  .searching {\n    margin: 8px;\n  }\n\n  .loading-error {\n    pre {\n      color: orangered;\n      overflow-x: auto;\n      padding-bottom: 14px;\n    }\n  }\n}\n\ninput {\n  height: 100%;\n  width: 100%;\n  padding-left: 10px;\n  font-size: 18px;\n  border: 0;\n}\n\ninput:focus {\n  outline: none;\n}\n\ninput::placeholder {\n  color: $hint-text;\n}\n</style>\n\n<script>\nexport default {\n  props: {\n    readonly: {\n      default: false\n    },\n    placeholder: {\n      default: \"Type here\"\n    },\n    getSuggestions: {\n      default: function(query) {\n        return query.split();\n      }\n    },\n    query: {\n      default: \"\"\n    },\n    delay: {\n      default: 80\n    }\n  },\n  data() {\n    return {\n      currentSelected: -1,\n      showSuggestions: false,\n      showLoading: false,\n      loadingError: null,\n      suggestions: [],\n      currentQuery: this.query\n    };\n  },\n  watch: {\n    query(newQuery) {\n      this.currentQuery = newQuery;\n    }\n  },\n  methods: {\n    refresh() {\n      if (this.showSuggestions) this.getSuggestionsInternal();\n    },\n\n    hideSuggestions() {\n      this.showSuggestions = false;\n      this.showLoading = false;\n      this.pendingKeyToShow = true;\n    },\n\n    showIfNeeded(visible) {\n      // we need to wait until next keypress before we can show suggestion.\n      // This avoids race conditions between search results and form submission\n      if (!this.pendingKeyToShow) this.showSuggestions = visible;\n    },\n\n    focus() {\n      this.$refs.input.focus();\n    },\n\n    pickCurrentText() {\n      this.pickSuggestion({ text: this.currentQuery });\n    },\n\n    pickSuggestion(suggestion) {\n      this.currentQuery = suggestion.text;\n      this.hideSuggestions();\n      this.$emit(\"selected\", this.currentQuery);\n    },\n\n    getSuggestionsInternal() {\n      var self = this;\n      if (self.previous) {\n        window.clearTimeout(self.previous);\n      }\n      if (!self.currentQuery) {\n        this.showSuggestions = false;\n        return;\n      }\n\n      self.previous = window.setTimeout(function() {\n        self.previous = null;\n\n        var query = self.currentQuery;\n        var p = self.getSuggestions(query);\n\n        if (Array.isArray(p)) {\n          self.suggestions = p.map(x => ({\n            selected: false,\n            text: x.text,\n            html: x.html\n          }));\n          self.currentSelected = -1;\n          self.showIfNeeded(p && p.length > 0);\n        } else if (p) {\n          self.loadingError = null;\n          self.showLoading = true;\n          p.then(\n            function(suggestions) {\n              self.showLoading = false;\n              suggestions = suggestions || [];\n              self.suggestions = suggestions.map(x => ({\n                selected: false,\n                text: x.text,\n                html: x.html\n              }));\n              self.currentSelected = -1;\n              self.showIfNeeded(suggestions && suggestions.length > 0);\n            },\n            function(err) {\n              self.loadingError = err;\n            }\n          );\n        } else {\n          throw new Error(\"Could not parse suggestions response\");\n        }\n      }, self.delay);\n    },\n\n    cycleTheList(e) {\n      var items = this.suggestions;\n      var currentSelected = this.currentSelected;\n      // Any key is alright for the suggestions\n      this.pendingKeyToShow = false;\n\n      let dx;\n      if (e.which === 38) {\n        // UP\n        dx = -1;\n      } else if (e.which === 40) {\n        // down\n        dx = 1;\n      } else if (e.which === 13) {\n        // Enter === accept\n        if (items[currentSelected]) {\n          this.pickSuggestion(items[currentSelected]);\n        } else {\n          this.pickSuggestion({ text: this.currentQuery });\n        }\n        e.preventDefault();\n        return;\n      } else if (e.which === 27) {\n        // Esc === close\n        this.hideSuggestions();\n      }\n\n      if (!dx || items.length === 0) return;\n\n      e.preventDefault();\n\n      if (currentSelected >= 0) {\n        this.suggestions[currentSelected].selected = false;\n      }\n      currentSelected += dx;\n      if (currentSelected < 0) currentSelected = items.length - 1;\n      if (currentSelected >= items.length) currentSelected = 0;\n\n      this.suggestions[currentSelected].selected = true;\n      this.currentSelected = currentSelected;\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Typeahead.vue?vue&type=template&id=2dc990e2&\"\nimport script from \"./Typeahead.vue?vue&type=script&lang=js&\"\nexport * from \"./Typeahead.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Typeahead.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <form v-on:submit.prevent=\"onSubmit\" class=\"search-box\">\n      <!-- <input class='search-input' type=\"text\" v-model='appState.query' placeholder='Enter query' autofocus> -->\n      <typeahead\n        placeholder=\"Enter subreddit name\"\n        ref:typeahead\n        @selected=\"doSearch\"\n        :query=\"appState.query\"\n        :get-suggestions=\"getSuggestions\"\n      ></typeahead>\n    </form>\n    <div class=\"help\" v-if=\"!isLoading\">\n      The graph of related subreddits\n      <a\n        href=\"#\"\n        @click.prevent=\"aboutVisible = true\"\n        class=\"highlight\"\n      >Learn more.</a>\n    </div>\n    <div class=\"help\" v-if=\"isLoading\">{{appState.progress.message}}</div>\n    <div class=\"about-line\">\n      <a class=\"about-link\" href=\"#\" @click.prevent=\"aboutVisible = true\">about</a>\n      <a class=\"bold\" href=\"https://github.com/anvaka/sayit\">source code</a>\n    </div>\n\n    <about v-if=\"aboutVisible\" @close=\"aboutVisible = false\"></about>\n\n    <div class=\"welcome\" v-if=\"!appState.hasGraph\">\n      <h3>Welcome!</h3>\n      <p>\n        This website renders graph of related subreddits.\n        <a\n          class=\"highlight\"\n          href=\"#\"\n          @click.prevent=\"aboutVisible = true\"\n        >Click here</a> to learn more, or\n        <a class=\"highlight\" href=\"?query=math\">try demo</a>.\n      </p>\n    </div>\n\n    <div class=\"tooltip\" ref=\"tooltip\">{{tooltip.text}}</div>\n    <subreddit v-if=\"subreddit\" :name=\"subreddit\" class=\"preview\"></subreddit>\n    <div class=\"close-container\" v-if=\"subreddit\">\n      <a href=\"#\" @click.prevent=\"subreddit = null\">close</a>\n    </div>\n  </div>\n</template>\n\n<script>\nimport \"vuereddit/dist/vuereddit.css\";\n\nimport appState, { performSearch } from \"./appState.js\";\nimport Subreddit from \"vuereddit\";\nimport createRenderer from \"./lib/createRenderer\";\nimport About from \"./components/About\";\nimport Typeahead from \"./components/Typeahead\";\nimport bus from \"./bus\";\nimport redditDataClient from \"./lib/redditDataClient\";\n\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      aboutVisible: false,\n      subreddit: null,\n      appState,\n      tooltip: {\n        text: \"\",\n        x: \"\",\n        y: \"\"\n      }\n    };\n  },\n  components: {\n    About,\n    Typeahead,\n    Subreddit\n  },\n  computed: {\n    isLoading() {\n      return appState.progress.working;\n    }\n  },\n  methods: {\n    doSearch(q) {\n      appState.query = q;\n      this.onSubmit();\n    },\n    getSuggestions(input) {\n      return redditDataClient.getSuggestion(input);\n    },\n    onSubmit() {\n      if (!appState.query) return;\n\n      performSearch(appState.query);\n      this.renderer.render(appState.graph);\n      const el = document.querySelector(\":focus\");\n      if (el) el.blur();\n    },\n    showSubreddit(name) {\n      this.subreddit = name;\n    }\n  },\n  mounted() {\n    this.renderer = createRenderer(appState.progress);\n    bus.on(\"show-subreddit\", this.showSubreddit);\n    bus.on(\"new-search\", this.doSearch);\n\n    if (appState.graph) {\n      this.renderer.render(appState.graph);\n    }\n  },\n\n  beforeDestroy() {\n    bus.off(\"show-subreddit\", this.showSubreddit);\n    bus.off(\"new-search\", this.doSearch);\n  }\n};\n</script>\n\n<style lang='stylus'>\n@import ('./vars.styl');\n\n#app {\n  position: relative;\n  margin: 8px 14px;\n  width: 392px;\n  background: background-color;\n}\n\n.close-container {\n  position: fixed;\n  z-index: 2;\n  top: 0;\n  right: 0;\n  height: 40px;\n\n  a {\n    padding: 0 12px;\n    font-size: 12px;\n    color: #fff;\n    background-color: #333;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n  }\n}\n\n.highlight {\n  color: highlight-color;\n}\n\nrect, path, text {\n  transition: stroke 200ms, fill 200ms;\n}\n\n.hovered rect, path.hovered {\n  stroke: highlight-color;\n}\n\n.hovered rect {\n  stroke: highlight-color;\n}\n\n.help {\n  font-size: 12px;\n  margin-top: 8px;\n\n  a {\n    background: background-color;\n  }\n}\n\n.special {\n  color: highlight-color;\n  font-family: monospace;\n}\n\na {\n  text-decoration: none;\n}\n\n.age-warning {\n  margin-top: 62px\n}\n\n.about-line {\n  position: fixed;\n  right: 0;\n  top: 8px;\n  padding: 0px 0;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n\n  a {\n    text-align: right;\n    background: background-color;\n    font-size: 12px;\n    padding: 0 8px;\n    line-height: 24px;\n    height: 24px;\n    color: secondary-color;\n    border-bottom: 1px solid transparent;\n\n    &:hover, &:focus {\n      color: highlight-color;\n      border-bottom: 1px dashed;\n    }\n  }\n}\n\n.tooltip {\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 -1px 0px rgba(0, 0, 0, 0.02);\n  position: fixed;\n  background: background-color;\n  padding: 8px;\n  border: 1px solid border-color;\n  pointer-events: none;\n  opacity: 0;\n  transition-duration: 300ms;\n  transition-property: opacity;\n}\n\n.tooltip.visible {\n  opacity: 1;\n}\n\n.search-box {\n  position: relative;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 -1px 0px rgba(0, 0, 0, 0.02);\n  height: 48px;\n  display: flex;\n  font-size: 16px;\n  padding: 0;\n  cursor: text;\n\n  span {\n    display: flex;\n    align-items: center;\n    flex-shrink: 0;\n  }\n}\n\n.subreddit.preview {\n  position: fixed;\n  right: 0;\n  top: 0;\n  width: 400px;\n  overflow: hidden;\n\n  a {\n    target: '_blank';\n  }\n\n  .controls {\n    position: absolute;\n    top: 42px;\n    right: 0;\n    left: 1px;\n    height: 32px;\n  }\n}\n\n.title-area {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 42px;\n}\n\n@media (max-width: 800px) {\n  #app {\n    width: 100%;\n    margin: 0;\n  }\n\n  .welcome {\n    padding: 16px;\n  }\n\n  .help {\n    padding: 0 8px;\n  }\n\n  .about-line {\n    bottom: 0;\n    top: initial;\n    right: 0;\n  }\n\n  .subreddit.preview {\n    width: 100%;\n  }\n}\n\ng.node {\n  cursor: pointer;\n}\n\n.details-container {\n  position: absolute;\n  top: 82px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.read-more {\n  linear-gradient(180deg, rgba(255, 255, 255, 0), #fff);\n}\n\n@media (max-height: 550px) {\n  .search-box {\n    height: 32px;\n\n    input.search-input {\n      font-size: 16px;\n    }\n  }\n\n  .help {\n    margin-top: 4px;\n  }\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=f26b34d6&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from \"vue\";\nimport App from \"./App\";\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=stylus&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&lang=stylus&\""],"sourceRoot":""}